uiNamespace setVariable ["po3_gearUI_disp",	(_this select 0)];
uiNamespace setVariable ["po3_gearUI_bg0",	(_this select 0) displayCtrl  0];
uiNamespace setVariable ["po3_gearUI_bg1",	(_this select 0) displayCtrl  1];
uiNamespace setVariable ["po3_gearUI_bgtitle",	(_this select 0) displayCtrl  2];
uiNamespace setVariable ["po3_gearUI_b1",	(_this select 0) displayCtrl  3];
uiNamespace setVariable ["po3_gearUI_b2",	(_this select 0) displayCtrl  4];
uiNamespace setVariable ["po3_gearUI_b3",	(_this select 0) displayCtrl  5];
uiNamespace setVariable ["po3_gearUI_b4",	(_this select 0) displayCtrl  6];
uiNamespace setVariable ["po3_gearUI_b5",	(_this select 0) displayCtrl  7];
uiNamespace setVariable ["po3_gearUI_listR",	(_this select 0) displayCtrl  8];
uiNamespace setVariable ["po3_gearUI_textu0",	(_this select 0) displayCtrl  9];
uiNamespace setVariable ["po3_gearUI_combu0",	(_this select 0) displayCtrl 10];
uiNamespace setVariable ["po3_gearUI_textu1",	(_this select 0) displayCtrl 11];
uiNamespace setVariable ["po3_gearUI_combu1",	(_this select 0) displayCtrl 12];
uiNamespace setVariable ["po3_gearUI_textu2",	(_this select 0) displayCtrl 13];
uiNamespace setVariable ["po3_gearUI_combu2",	(_this select 0) displayCtrl 14];
uiNamespace setVariable ["po3_gearUI_textu3",	(_this select 0) displayCtrl 15];
uiNamespace setVariable ["po3_gearUI_combu3",	(_this select 0) displayCtrl 16];
uiNamespace setVariable ["po3_gearUI_textu4",	(_this select 0) displayCtrl 17];
uiNamespace setVariable ["po3_gearUI_combu4",	(_this select 0) displayCtrl 18];
uiNamespace setVariable ["po3_gearUI_b6",	(_this select 0) displayCtrl 19];
uiNamespace setVariable ["po3_gearUI_b7",	(_this select 0) displayCtrl 20];
uiNamespace setVariable ["po3_gearUI_b8",	(_this select 0) displayCtrl 21];
uiNamespace setVariable ["po3_gearUI_b9",	(_this select 0) displayCtrl 22];
uiNamespace setVariable ["po3_gearUI_b10",	(_this select 0) displayCtrl 23];
uiNamespace setVariable ["po3_gearUI_b11",	(_this select 0) displayCtrl 24];
uiNamespace setVariable ["po3_gearUI_b12",	(_this select 0) displayCtrl 25];
uiNamespace setVariable ["po3_gearUI_listG",	(_this select 0) displayCtrl 26];
uiNamespace setVariable ["po3_gearUI_listP",	(_this select 0) displayCtrl 27];
uiNamespace setVariable ["po3_gearUI_b13",	(_this select 0) displayCtrl 28];
uiNamespace setVariable ["po3_gearUI_b14",	(_this select 0) displayCtrl 29];

#define PO3_gearUI_VAR_D (uiNamespace getVariable "po3_gearUI_disp")
#define PO3_gearUI_VAR_BG0 (uiNamespace getVariable "po3_gearUI_bg0")
#define PO3_gearUI_VAR_BG1 (uiNamespace getVariable "po3_gearUI_bg1")
#define PO3_gearUI_VAR_TITLE (uiNamespace getVariable "po3_gearUI_bgtitle")
#define PO3_gearUI_VAR_B1 (uiNamespace getVariable "po3_gearUI_b1")
#define PO3_gearUI_VAR_B2 (uiNamespace getVariable "po3_gearUI_b2")
#define PO3_gearUI_VAR_B3 (uiNamespace getVariable "po3_gearUI_b3")
#define PO3_gearUI_VAR_B4 (uiNamespace getVariable "po3_gearUI_b4")
#define PO3_gearUI_VAR_B5 (uiNamespace getVariable "po3_gearUI_b5")
#define PO3_gearUI_VAR_LISTR (uiNamespace getVariable "po3_gearUI_listR")
#define PO3_gearUI_VAR_TEXTU0 (uiNamespace getVariable "po3_gearUI_textu0")
#define PO3_gearUI_VAR_COMBU0 (uiNamespace getVariable "po3_gearUI_combu0")
#define PO3_gearUI_VAR_TEXTu1 (uiNamespace getVariable "po3_gearUI_textu1")
#define PO3_gearUI_VAR_COMBU1 (uiNamespace getVariable "po3_gearUI_combu1")
#define PO3_gearUI_VAR_TEXTU2 (uiNamespace getVariable "po3_gearUI_textu2")
#define PO3_gearUI_VAR_COMBU2 (uiNamespace getVariable "po3_gearUI_combu2")
#define PO3_gearUI_VAR_TEXTU3 (uiNamespace getVariable "po3_gearUI_textu3")
#define PO3_gearUI_VAR_COMBU3 (uiNamespace getVariable "po3_gearUI_combu3")
#define PO3_gearUI_VAR_TEXTu4 (uiNamespace getVariable "po3_gearUI_textu4")
#define PO3_gearUI_VAR_COMBU4 (uiNamespace getVariable "po3_gearUI_combu4")
#define PO3_gearUI_VAR_B6 (uiNamespace getVariable "po3_gearUI_b6")
#define PO3_gearUI_VAR_B7 (uiNamespace getVariable "po3_gearUI_b7")
#define PO3_gearUI_VAR_B8 (uiNamespace getVariable "po3_gearUI_b8")
#define PO3_gearUI_VAR_B9 (uiNamespace getVariable "po3_gearUI_b9")
#define PO3_gearUI_VAR_B10 (uiNamespace getVariable "po3_gearUI_b10")
#define PO3_gearUI_VAR_B11 (uiNamespace getVariable "po3_gearUI_b11")
#define PO3_gearUI_VAR_B12 (uiNamespace getVariable "po3_gearUI_b12")
#define PO3_gearUI_VAR_LISTG (uiNamespace getVariable "po3_gearUI_listG")
#define PO3_gearUI_VAR_LISTP (uiNamespace getVariable "po3_gearUI_listP")
#define PO3_gearUI_VAR_B13 (uiNamespace getVariable "po3_gearUI_b13")
#define PO3_gearUI_VAR_B14 (uiNamespace getVariable "po3_gearUI_b14")

#define PO3_BUTTON_ACTIVATE(DIALOG,CTRL_NUM,CTRL_TEXT) \
	_control = DIALOG displayctrl CTRL_NUM; \
	_control ctrlSetText CTRL_TEXT; \
	_control ctrlSetFade 0; \
	_control ctrlEnable true; \
	_control ctrlCommit 0.2; \

#define PO3_BUTTON_DEACTIVATE(DIALOG,CTRL_NUM,CTRL_TEXT) \
	_control = DIALOG displayctrl CTRL_NUM; \
	_control ctrlSetText CTRL_TEXT; \
	_control ctrlEnable false; \
	_control ctrlCommit 0; \

#define PO3_CNTRL_ACTIVATE(DIALOG,CTRL_NUM) \
	_control = DIALOG displayctrl CTRL_NUM; \
	_control ctrlSetFade 0; \
	_control ctrlEnable true; \
	_control ctrlCommit 0.2; \

#define PO3_CNTRL_DEACTIVATE(DIALOG,CTRL_NUM) \
	_control = DIALOG displayctrl CTRL_NUM; \
	_control ctrlSetFade 1; \
	_control ctrlEnable false; \
	_control ctrlCommit 0; \

if(isNil "po3_playerVAR_classSelect") then { po3_playerVAR_classSelect = [] };

po3_fnc_gearUI_RoleList_prep = {
	lbClear PO3_gearUI_VAR_LISTR;
	{
		_role = _x;
		_roleTitle = _role select 0;
		_id = PO3_gearUI_VAR_LISTR lbAdd format["%1",_roleTitle];
		PO3_gearUI_VAR_LISTR lbSetValue [_id,_forEachIndex];
	}forEach po3_preDefinedClassLoadouts;
};

po3_fnc_gearUI_UniformList_prep = {
	_loadout = _this;

	lbClear PO3_gearUI_VAR_COMBU0;
	{
		_display = [_x] call mpsf_fnc_getCfgText;
		_picture = [_x] call mpsf_fnc_getCfgPicture;

		_id = PO3_gearUI_VAR_COMBU0 lbAdd format["%1",_display];
		PO3_gearUI_VAR_COMBU0 lbSetValue [_id,_forEachIndex];
		PO3_gearUI_VAR_COMBU0 lbSetPicture [_id, _picture ];
	}forEach (_loadout select 2);

	lbClear PO3_gearUI_VAR_COMBU1;
	{
		_display = [_x] call mpsf_fnc_getCfgText;
		_picture = [_x] call mpsf_fnc_getCfgPicture;

		_id = PO3_gearUI_VAR_COMBU1 lbAdd format["%1",_display];
		PO3_gearUI_VAR_COMBU1 lbSetValue [_id,_forEachIndex];
		PO3_gearUI_VAR_COMBU1 lbSetPicture [_id, _picture ];
	}forEach (_loadout select 3);

	lbClear PO3_gearUI_VAR_COMBU2;
	{
		_display = [_x] call mpsf_fnc_getCfgText;
		_picture = [_x] call mpsf_fnc_getCfgPicture;

		_id = PO3_gearUI_VAR_COMBU2 lbAdd format["%1",_display];
		PO3_gearUI_VAR_COMBU2 lbSetValue [_id,_forEachIndex];
		PO3_gearUI_VAR_COMBU2 lbSetPicture [_id, _picture ];
	}forEach (_loadout select 5);

	lbClear PO3_gearUI_VAR_COMBU3;
	{
		_display = [_x] call mpsf_fnc_getCfgText;
		_picture = [_x] call mpsf_fnc_getCfgPicture;

		_id = PO3_gearUI_VAR_COMBU3 lbAdd format["%1",_display];
		PO3_gearUI_VAR_COMBU3 lbSetValue [_id,_forEachIndex];
		PO3_gearUI_VAR_COMBU3 lbSetPicture [_id, _picture ];
	}forEach (_loadout select 4);

	lbClear PO3_gearUI_VAR_COMBU4;
	_master = configFile >> "CfgGlasses";
	for "_i" from 0 to (count _master)-1 do {
		_class = _master select _i;
		if(isClass _class) then {
			_class = configName _class;
			_display = [_class ] call mpsf_fnc_getCfgText;
			_picture = [_class ] call mpsf_fnc_getCfgPicture;

			if( _picture != "" ) then {
				_id = PO3_gearUI_VAR_COMBU4 lbAdd format["%1",_display];
				PO3_gearUI_VAR_COMBU4 lbSetValue [_id,_i];
				PO3_gearUI_VAR_COMBU4 lbSetPicture [_id, _picture ];
			};
		};
	};
};

po3_fnc_gearUI_WeaponList_prep = {
	_loadout = _this;

	lbClear PO3_gearUI_VAR_LISTG;
	{
		_display = [_x] call mpsf_fnc_getCfgText;
		_picture = [_x] call mpsf_fnc_getCfgPicture;

		_id = PO3_gearUI_VAR_LISTG lbAdd format["%1",_display];
		PO3_gearUI_VAR_LISTG lbSetValue [_id,_forEachIndex];
		PO3_gearUI_VAR_LISTG lbSetPicture [_id, _picture ];
	}forEach (_loadout select 2);

	lbClear PO3_gearUI_VAR_LISTP;
	{
		_display = [_x] call mpsf_fnc_getCfgText;
		_picture = [_x] call mpsf_fnc_getCfgPicture;

		_id = PO3_gearUI_VAR_LISTP lbAdd format["%1",_display];
		PO3_gearUI_VAR_LISTP lbSetValue [_id,_forEachIndex];
		PO3_gearUI_VAR_LISTP lbSetPicture [_id, _picture ];
	}forEach (_loadout select 3);
};

po3_fnc_gearUI_RoleList_select = {
	po3_playerVAR_classSelect = (po3_preDefinedClassLoadouts select (_this select 1));
	[true,"HINTS",format["%1 Selected",(po3_playerVAR_classSelect select 0)] ] call mpsf_fnc_hint;

	[1] call po3_fnc_gearUI_loadScreen;
};

po3_fnc_gearUI_uniform_select = {
	hint str _this;
};

po3_fnc_gearUI_loadScreen = {
	disableSerialization;
	{ PO3_CNTRL_DEACTIVATE(PO3_gearUI_VAR_D, _x); }forEach [0,1,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29];

	switch(_this select 0) do {
		case 0 : { { PO3_CNTRL_ACTIVATE(PO3_gearUI_VAR_D, _x); }forEach [0,8] };
		case 1 : { po3_playerVAR_classSelect call po3_fnc_gearUI_UniformList_prep; { PO3_CNTRL_ACTIVATE(PO3_gearUI_VAR_D, _x); }forEach [1,9,10,11,12,13,14,15,16,17,18,19,20,21,22] };
		case 2;
		case 3 : { po3_playerVAR_classSelect call po3_fnc_gearUI_WeaponList_prep;  { PO3_CNTRL_ACTIVATE(PO3_gearUI_VAR_D, _x); }forEach [0,23,24,25,26,27,28,29] };
		case 4 : { po3_playerVAR_classSelect call po3_fnc_gearUI_MagList_prep;  { PO3_CNTRL_ACTIVATE(PO3_gearUI_VAR_D, _x); }forEach [0,23,24,25,26,27,28,29] };
		case 5 : { po3_playerVAR_classSelect call po3_fnc_gearUI_ItemList_prep;  { PO3_CNTRL_ACTIVATE(PO3_gearUI_VAR_D, _x); }forEach [0,23,24,25,26,27,28,29] };
	};
};

[] call po3_fnc_gearUI_RoleList_prep;

_playerClass = player getVariable ["po3_player_VAR_class",nil];
if(isNil "_playerClass") then {
	[0] call po3_fnc_gearUI_loadScreen;
}else{
	[1] call po3_fnc_gearUI_loadScreen;
};